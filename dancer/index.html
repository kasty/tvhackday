<!doctype html>
<html lang="en">
<head>
<title>SoundManager 2: JavaScript Sound For The Web</title>
<meta name="robots" content="noindex" />
<meta name="description" content="Play sound from JavaScript including MP3, MPEG-4 and HTML5-supported audio formats with SoundManager 2, a cross-browser/platform sound API. BSD licensed."/>
<meta name="keywords" content="javascript sound, html5 audio, html5 sound, javascript audio, javascript play mp3, javascript sound control, mp3, mp4, mpeg4, aac, Scott Schiller, Schill, Schillmania"/>
<meta name="author" content="Scott Schiller"/>
<meta name="dcterms.rights" content="Copyright (C) 1997 onwards Scott Schiller"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

<!-- inline demo CSS (combined + minified for performance; see comments for raw source URLs) -->
<!-- the SoundManager 2 API -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
<script type="text/javascript" src="dancer.js/dancer.min.js"></script>
<script src="http://www.arte.tv/arte_vp/js/main.js"></script>
<!--<script type="text/javascript" src="script/soundmanager2-nodebug-jsmin.js"></script>-->


<script>
document.domain = "arte.tv";
var player;
var hasAlreadyPaused = false;
var dancer = new Dancer();

$(window).load(function() {
	//listen to the arte_vp_player_config_ready event
	$('.video-container').on('arte_vp_player_ready',function() {

		var playerDomElement = $(this).find('iframe')[0].contentWindow.$('div#player_container');
		arte_vp = $(this).find('iframe')[0].contentWindow.arte_vp;
				
		$(this).find('iframe')[0].contentWindow.arte_vp.jwplayer.onPlay(function(event){
			
			if(hasAlreadyPaused == false)
			{
				var self = this;
		
				arte_vp.jwplayer.pause();
				setTimeout(function(){
				
					hasAlreadyPaused = true;
					self.play(true);
				
				},1000);
		
				dancer.load({src:arte_vp.arte_vp_sources[2].file});
				dancer.play();
				dancer.audio.volume = 0;
				
				kick = dancer.createKick({
					threshold:0.05,
					decay:0.03,
					onKick: function ( mag ) {
						console.log(Math.random()+'  Kick!');
					},
					offKick: function ( mag ) {
						//console.log('no kick :(');
					}
				});

				// Let's turn this kick on right away
				kick.on();
			}
		});
	
	});
});
</script>
<body>
<div style="width:720px;height:406px;background:black;position:relative;" class="video-container" arte_vp_config="arte_concert" arte_vp_lang="fr_FR" arte_vp_url="http://concert.arte.tv/fr/player/27446" arte_vp_autostart="1"></div>
</body>
</html>
